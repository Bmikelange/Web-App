function loadXMLAsynchroneously(e,t,n,o){var r=initRequete();r.onreadystatechange=function(){getXMLDocument(r,null,o)},r.open(e,t,!0),!n||"post"!=e&&"POST"!=e||r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(n)}function sendRequestAsynchroneously(e,t,n){var o=initRequete();o.open(e,t,!0),!n||"post"!=e&&"POST"!=e||o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(n)}function getXMLDocument(e,t,n){4==e.readyState&&(200==e.status?(null!=e.responseXML?t=e.responseXML:e.responseText,traiteXML(t,n)):e.status>=400&&1223!=e.status&&alert("Un probl�me est survenu avec la requ�te : "))}function traiteXML(e,t){document.getElementById(t).innerHTML="",document.getElementById(t).appendChild(e.activeElement)}function initRequete(){var e=null;return window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e}function parseFromString(e){if(window.ActiveXObject)(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);else var t=(new DOMParser).parseFromString(e,"text/xml");return t}function getXMLTextContent(e){return null!=e.textContent?e.textContent:e.text}function connect(){let e=$("#pseudo").val(),t={pseudo:e};$.ajax({url:"https://192.168.75.13/api/v2/users/login",type:"POST",contentType:"application/json",data:JSON.stringify(t),success:function(t,o,n){globaleAuthorization=n.getResponseHeader("Authorization"),globaleNomUtilisateur=e,getListeGroupes(),replier("#Bienvenue"),deplier("#ListeGroupes"),getUsersList()},error:function(e,t,o){alert("Ajax request failed.")}})}function disconnect(){$.ajax({url:"https://192.168.75.13/api/v2/users/logout",type:"POST",dataType:"json",contentType:"application/json",headers:{Authorization:globaleAuthorization},success:function(e,t){globaleAuthorization="",replierAll(),deplier("#Bienvenue")},error:function(e,t,o){alert("Vous n'appartenez pas à ce groupe.")}})}function fetchonsUnPeu(e,t){var o=new Headers;o.append("Content-Type","application/json"),o.append("Accept","application/json"),o.append("Authorization",globaleAuthorization);var n={method:"GET",headers:o},l=new Request(e,n);fetch(l,n).then(e=>e.json()).then(e=>t(e))}function deleteItem(e,t,o){$.ajax({url:e,type:"DELETE",dataType:"json",contentType:"application/json",headers:{Authorization:globaleAuthorization},success:function(e,n){o(t)},error:function(o,n,l){console.log(e),console.log(t),alert("Un problême est survenu sur le delete")}})}function createElement(e,t,o){$.ajax({url:t,type:"POST",contentType:"application/json",data:JSON.stringify(e),headers:{Authorization:globaleAuthorization},success:function(e,t){o()},error:function(e,t,o){alert("Echec sur la création d'élément.")}})}function modifyElement(e,t,o){$.ajax({url:t,type:"PUT",contentType:"application/json",data:JSON.stringify(e),headers:{Authorization:globaleAuthorization},success:function(e,t){o()},error:function(e,t,o){alert("Echec sur la création d'élément.")}})}function getLastValueInUrl(e){return e.split("/").pop()}function deleteGroupe(e,t){deleteItem("https://192.168.75.13/api/v2/groupes/"+getLastValueInUrl(t),e,supprimerLi)}function deleteBillet(e,t){let o=getLastValueInUrl(t);deleteItem("https://192.168.75.13/api/v2/groupes/"+globaleIdGroupe+"/billets/"+o,e,supprimerLi)}function deleteCommentaire(e,t){let o=getLastValueInUrl(t);deleteItem("https://192.168.75.13/api/v2/groupes/"+globaleIdGroupe+"/billets/"+globaleIdBillet+"/commentaires/"+o,e,supprimerLi)}function createCommentaire(){createElement({auteur:globaleNomUtilisateur,texte:$("#commentaireCommentaire").val()},"https://192.168.75.13/api/v2/groupes/"+globaleIdGroupe+"/billets/"+globaleIdBillet+"/commentaires",getAllCommentaire)}function modifyCommentaire(e,t){let o=getLastValueInUrl(t);modifyElement({auteur:globaleNomUtilisateur,texte:e.parentNode.parentNode.getElementsByTagName("p")[0].innerText},"https://192.168.75.13/api/v2/groupes/"+globaleIdGroupe+"/billets/"+globaleIdBillet+"/commentaires/"+o,getAllCommentaire)}function createBillet(){createElement({titre:$("#titreNewBillet").val(),contenu:$("#contenuNewBillet").val(),auteur:globaleNomUtilisateur,commentaires:[]},"https://192.168.75.13/api/v2/groupes/"+globaleIdGroupe+"/billets",getGroupe)}function createGroupe(){createElement({nom:$("#nomNewGroupe").val(),description:"ceci est ma description par défaut"},"https://192.168.75.13/api/v2/groupes",getListeGroupes)}function getListeGroupes(){fetchonsUnPeu("https://192.168.75.13/api/v2/groupes",chargerListeGroupe)}function getAllCommentaire(){fetchonsUnPeu("https://192.168.75.13/api/v2/groupes/"+globaleIdGroupe+"/billets/"+globaleIdBillet+"/commentaires",chargerCommentaires)}function getAllCommentaireWith(){fetchonsUnPeu("https://192.168.75.13/api/v2/groupes/"+globaleIdGroupe+"/billets/"+globaleIdBillet+"/commentaires",chargerCommentairesWith)}function getUsersList(){fetchonsUnPeu("https://192.168.75.13/api/v2/users/",chargerListeUtilisateur)}function getCommentaire(e){let t=e.split("/").pop();fetchonsUnPeu("https://192.168.75.13/api/v2/groupes/"+globaleIdGroupe+"/billets/"+globaleIdBillet+"/commentaires/"+t,avantAfficherCommentaire(e))}function getBillet(e){globaleIdBillet=e,fetchonsUnPeu("https://192.168.75.13/api/v2/groupes/"+globaleIdGroupe+"/billets/"+e,afficherBillet)}function getGroupe(e){null!=e&&(globaleIdGroupe=e),fetchonsUnPeu("https://192.168.75.13/api/v2/groupes/"+globaleIdGroupe,chargerUnGroupe)}function getGroupeS(e){null!=e&&(globaleIdGroupe=e),fetchonsUnPeu("https://192.168.75.13/api/v2/groupes/"+globaleIdGroupe,chargerUnGroupeS)}setInterval(function(){getAllCommentaireWith()},5e3),setInterval(function(){getGroupeS(void 0)},5e3);function placerElement(e,t,r){var n=$(e).html();Mustache.parse(n);var i=Mustache.render(n,t);$(r).html(i)}function addElementInList(e,t,r){var n=$(e).html();Mustache.parse(n);var i=Mustache.render(n,t);$(r).append(i)}function chargerListeGroupe(e){vider("#groupesList"),e.forEach(function(e){addElementInList("#templateButtonGroupe",{data:e,id:e.split("/").pop()},"#groupesList")})}function chargerUnGroupe(e){chargerDescription(e),chargerBillets(e),replier("#ListeGroupes"),deplier("#Groupe")}function chargerUnGroupeS(e){chargerDescription(e),chargerBillets(e)}function chargerTitre(e){placerElement("#templateData",{data:e.description},"#bltTitre")}function chargerBillets(e){vider("#bltList"),e.billets.forEach(function(e){addElementInList("#templateButtonBillet",{data:e,id:e.split("/").pop()},"#bltList")})}function afficherBillet(e){replier("#Groupe"),$("#bltTitre").html(e.titre),$("#bltContenu").html(e.contenu),$("#bltAuteur").html(e.auteur),deplier("#Billet"),getAllCommentaire()}function chargerCommentaires(e){vider("#commentList"),e.forEach(function(e){getCommentaire(e)})}function chargerCommentairesWith(e){var t=document.getElementById("commentList").getElementsByTagName("li").length;if(t>e.length)vider("#commentList"),e.forEach(function(e){getCommentaire(e)});else if(t<e.length){var r=0;e.forEach(function(e){r<=t?r++:getCommentaire(e)})}}function avantAfficherCommentaire(e){return function(t){addElementInList("#templateButtonComment",{data:e,texte:t.texte},"#commentList")}}function chargerDescription(e){placerElement("#templateData",{data:e.description},"#grpDesc")}function chargerListeUtilisateur(e){vider("#usersList"),e.forEach(function(e){addElementInList("#templateLi",{data:e},"#usersList")})}function replierAll(){$("h2").each(function(){$(this).parent().children('div[name="replier"]').slideUp()})}function supprimerLi(e){let i=e.parentNode.parentNode;i.parentNode.removeChild(i)}function deplier(e){$(e).slideDown()}function replier(e){$(e).slideUp()}function vider(e){$(e).html("")}